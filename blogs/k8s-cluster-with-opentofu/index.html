<!DOCTYPE html>
<html>

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta http-equiv="Accept-CH" content="DPR, Viewport-Width, Width">
<link rel="icon" href=/fav.png type="image/ico">

<meta property="og:title" content="Deploying a Civo Kubernetes Cluster with Opentofu">
<meta property="og:type" content="article">
<meta property="og:url" content="https://xavierllauca.com/blogs/k8s-cluster-with-opentofu/">
<meta property="og:image" content="/images/post-tofu.jpg">
<meta property="og:description" content="This post explains how to deploy a Civo Kubernetes cluster using OpenTofu. :)">
<meta property="og:site_name" content="Xavier Llauca">
<meta property="og:locale" content="en">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Deploying a Civo Kubernetes Cluster with Opentofu">
<meta name="twitter:description" content="This post explains how to deploy a Civo Kubernetes cluster using OpenTofu. :)">
<meta name="twitter:image" content="/images/post-tofu.jpg">



<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      media="print" onload="this.media='all'" />
<noscript>
  <link
          href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">
</noscript>


<link rel="stylesheet" href="/css/font.css" media="all">



      <script async src="https://www.googletagmanager.com/gtag/js?id=G-0V4GFK0457"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-0V4GFK0457');
        }
      </script>
<meta property="og:url" content="https://xavierllauca.com/blogs/k8s-cluster-with-opentofu/">
  <meta property="og:site_name" content="Xavier Llauca">
  <meta property="og:title" content="Deploying a Civo Kubernetes Cluster with Opentofu">
  <meta property="og:description" content="This post explains how to deploy a Civo Kubernetes cluster using OpenTofu. :)">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blogs">
    <meta property="article:published_time" content="2024-08-09T00:28:22-05:00">
    <meta property="article:modified_time" content="2024-08-09T00:28:22-05:00">
    <meta property="article:tag" content="Cncf">
    <meta property="article:tag" content="Opentofu">
    <meta property="article:tag" content="Kubernetes">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Deploying a Civo Kubernetes Cluster with Opentofu">
  <meta name="twitter:description" content="This post explains how to deploy a Civo Kubernetes cluster using OpenTofu. :)">


<link rel="stylesheet" href="/bootstrap-5/css/bootstrap.min.css" media="all"><link rel="stylesheet" href="/css/header.css" media="all">
<link rel="stylesheet" href="/css/footer.css" media="all">


<link rel="stylesheet" href="/css/theme.css" media="all">

<style>
    :root {
        --text-color: #343a40;
        --text-secondary-color: #6c757d;
        --text-link-color: #007bff;
        --background-color: #eaedf0;
        --secondary-background-color: #64ffda1a;
        --primary-color: #007bff;
        --secondary-color: #f8f9fa;

         
        --text-color-dark: #e4e6eb;
        --text-secondary-color-dark: #b0b3b8;
        --text-link-color-dark: #ffffff;
        --background-color-dark: #18191a;
        --secondary-background-color-dark: #212529;
        --primary-color-dark: #ffffff;
        --secondary-color-dark: #212529;
    }
    body {
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        text-align: left;
    }

    html {
        background-color: var(--background-color) !important;
    }

    body::-webkit-scrollbar {
        height: 0px;
        width: 8px;
        background-color: var(--background-color);
    }

    ::-webkit-scrollbar-track {
        border-radius: 1rem;
    }

    ::-webkit-scrollbar-thumb {
        border-radius: 1rem;
        background: #b0b0b0;
        outline: 1px solid var(--background-color);
    }

    #search-content::-webkit-scrollbar {
        width: .5em;
        height: .1em;
        background-color: var(--background-color);
    }
</style>



<meta name="description" content="">
<link rel="stylesheet" href="/css/single.css">


<script defer src="/fontawesome-6/all-6.4.2.js"></script>


  
  

  <title>
Deploying a Civo Kubernetes Cluster with Opentofu | Xavier Llauca

  </title>
</head>

<body class="light">
  
  
<script>
    let localStorageValue = localStorage.getItem("pref-theme");
    let mediaQuery = window.matchMedia('(prefers-color-scheme: dark)').matches;

    switch (localStorageValue) {
        case "dark":
            document.body.classList.add('dark');
            break;
        case "light":
            document.body.classList.remove('dark');
            break;
        default:
            if (mediaQuery) {
                document.body.classList.add('dark');
            }
            break;
    }
</script>




<script>
    var prevScrollPos = window.pageYOffset;
    window.addEventListener("scroll", function showHeaderOnScroll() {
        let profileHeaderElem = document.getElementById("profileHeader");
        let currentScrollPos = window.pageYOffset;
        let resetHeaderStyle = false;
        let showNavBarOnScrollUp =  true ;
        let showNavBar = showNavBarOnScrollUp ? prevScrollPos > currentScrollPos : currentScrollPos > 0;
        if (showNavBar) {
            profileHeaderElem.classList.add("showHeaderOnTop");
        } else {
            resetHeaderStyle = true;
        }
        if(currentScrollPos === 0) {
            resetHeaderStyle = true;
        }
        if(resetHeaderStyle) {
            profileHeaderElem.classList.remove("showHeaderOnTop");
        }
        prevScrollPos = currentScrollPos;
    });
</script>



<header id="profileHeader">
    <nav class="pt-3 navbar navbar-expand-lg animate">
        <div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5">
            
            <a class="navbar-brand primary-font text-wrap" href="/">
                
                Xavier Llauca
                
            </a>

            
                <div>
                    <input id="search" autocomplete="off" class="form-control mr-sm-2 d-none d-md-block" placeholder='Search'
                        aria-label="Search" oninput="searchOnChange(event)">
                </div>
            

            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true">
                    <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
                </svg>
            </button>

            
            <div class="collapse navbar-collapse text-wrap primary-font" id="navbarContent">
                <ul class="navbar-nav ms-auto text-center">
                    
                        <li class="nav-item navbar-text d-block d-md-none">
                            <div class="nav-link">
                                <input id="search" autocomplete="off" class="form-control mr-sm-2" placeholder='Search' aria-label="Search" oninput="searchOnChange(event)">
                            </div>
                        </li>
                    

                    

                    

                    

                    

                    

                    

                    

                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/blogs" title="Blog posts">
                            
                            Blog
                        </a>
                    </li>
                    
                    

                    
                    <li class="nav-item navbar-text">
                        
                        <div class="text-center">
                            <button id="theme-toggle">
                                <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                                <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                    <line x1="1" y1="12" x2="3" y2="12"></line>
                                    <line x1="21" y1="12" x2="23" y2="12"></line>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                </svg>
                            </button>
                        </div>
                    </li>
                    

                </ul>

            </div>
        </div>
    </nav>
</header>
<div id="content">
<section id="single">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-sm-12 col-md-12 col-lg-9">
        <div class="pr-lg-4">
          <div class="title mb-5">
            <h1 class="text-center mb-4">Deploying a Civo Kubernetes Cluster with Opentofu</h1>
            <div class="text-center">
              
                Xavier Llauca
                <small>|</small>
              
              Aug 9, 2024

              
              <span id="readingTime">
                min read
              </span>
              
            </div>
          </div>





          <article class="page-content  p-2">
          <p><img src="/posts/tofu/civo-tofu.svg" alt="Cluster desplegado"></p>
<div style="text-align: center;">
    <span style="color: #4CAF50;">
        <i class="fas fa-download"></i>
    </span>
    <a href="https://gitlab.com/devsecops-labs-experimental/kubernetes-civo-opentofu" 
       style="text-decoration: none; color: inherit;" 
       target="_blank">
        <b>Download the Project Source Code on GitLab</b>
        <span style="color: #e24329;">
            <i class="fab fa-gitlab"></i>
        </span>
    </a>
</div>
<h2 id="overview">Overview</h2>
<p>This post provides a step-by-step guide on deploying a Kubernetes cluster in Civo, utilizing OpenTofu, an open-source infrastructure-as-code tool. It covers the prerequisites needed for the deployment, such as setting up the Civo API token and installing OpenTofu. The post walks through writing the necessary configuration files, defining the cluster specifications, and applying the configuration to create and manage the cluster.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li><a href="https://www.civo.com/docs/overview/civo-cli">Civo (CLI)</a></li>
<li><a href="https://opentofu.org/docs/intro/install/">OpenTofu</a></li>
<li><a href="https://kubernetes.io/docs/tasks/tools/#kubectl">Kubectl</a></li>
</ul>
<p><strong>Useful Commands</strong> to list and verify different versions, applications, and node sizes, which will help us define the configuration of our Kubernetes cluster before deployment.</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>civo region ls                      <span style="color:#7f848e">#List available regions.</span>
</span></span><span style="display:flex;"><span>civo kubernetes versions            <span style="color:#7f848e">#List available Kubernetes versions.</span>
</span></span><span style="display:flex;"><span>civo kubernetes applications ls     <span style="color:#7f848e">#List available Kubernetes applications.</span>
</span></span><span style="display:flex;"><span>civo kubernetes size                <span style="color:#7f848e">#List available Kubernetes node sizes.</span>
</span></span></code></pre></div><h2 id="configure-backend">Configure Backend</h2>
<p><strong>Setting Up Terraform Cloud for Civo Deployment</strong></p>
<p>In this example, we use Terraform Cloud as the backend, so it is necessary to create an account in Terraform Cloud, define an organization, create a workspace, and configure the CIVO_TOKEN variable. This variable is essential to grant Terraform Cloud the necessary permissions to access Civo and deploy the required resources.</p>
<p><img src="/posts/tofu/var.png" alt="Variables"></p>
<p><strong>Authenticating OpenTofu with Terraform Cloud</strong></p>
<p><strong>Note:</strong> To authenticate OpenTofu with Terraform Cloud, first run the command tofu login app.terraform.io. After executing the command, you will be prompted to type <code>yes</code> to proceed. Then, paste the <code>token</code> obtained from Terraform Cloud. Once this step is completed, you will be able to use OpenTofu with Terraform Cloud seamlessly.</p>
<script src="https://asciinema.org/a/1jhUhBULxMxdoJaYJjTBI3b6k.js" id="asciicast-1jhUhBULxMxdoJaYJjTBI3b6k" async="true"></script>
<h2 id="defining-a-kubernetes-resource">Defining a Kubernetes resource</h2>
<p><span style="color: dark; font-weight: bold; font-style: italic; font-size: 1.5em;">providers.tf</span></p>
<p>In this section, we define the <a href="https://registry.terraform.io/providers/civo/civo/latest">provider</a>, the <a href="https://opentofu.org/docs/cli/cloud/settings/#the-cloud-block">backend</a>, and configure the corresponding variables: the region where the cluster will be deployed and the token that OpenTofu uses to authenticate with Civo.</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hcl" data-lang="hcl"><span style="display:flex;"><span><span style="color:#c678dd">terraform</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#c678dd">required_providers</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    civo</span> <span style="color:#56b6c2">=</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">      source</span>  <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;civo/civo&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">      version</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;1.1.1&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#c678dd">cloud</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    organization</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;xllauca&#34;</span><span style="color:#7f848e">
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    ## Required for Terraform Enterprise; Defaults to app.terraform.io for Terraform Cloud
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">    hostname</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;app.terraform.io&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">workspaces</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">      name</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;prod&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">provider</span> <span style="color:#98c379">&#34;civo&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  token</span>  <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">CIVO_TOKEN</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  region</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">region</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><span style="color: dark; font-weight: bold; font-style: italic; font-size: 1.5em;">network.tf</span></p>
<p>In this section, we define the network region that we will use for our cluster.</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hcl" data-lang="hcl"><span style="display:flex;"><span><span style="color:#c678dd">resource</span> <span style="color:#98c379">&#34;civo_network&#34; &#34;network_cluster_civo&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  label</span>  <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">network_name</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  region</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">region</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><span style="color: dark; font-weight: bold; font-style: italic; font-size: 1.5em;">firewall.tf</span></p>
<p>In the firewall resource, we define which ports need to be open on our cluster, customizing them according to our needs. In this case, we have configured an ingress rule for port 6443 and an egress rule that allows all traffic. To ensure that the cluster is only accessible from trusted IPs, we need to specify only our public IP in the <code>cidr = var.authorized_networks</code> variable, thus avoiding exposing the cluster to the entire Internet.</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hcl" data-lang="hcl"><span style="display:flex;"><span><span style="color:#c678dd">resource</span> <span style="color:#98c379">&#34;civo_firewall&#34; &#34;civo_firewall_cluster&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  name</span>                 <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">firewall_name</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  region</span>               <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">region</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  network_id</span>           <span style="color:#56b6c2">=</span> <span style="color:#c678dd">civo_network</span>.<span style="color:#c678dd">network_cluster_civo</span>.<span style="color:#c678dd">id</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  create_default_rules</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#c678dd">ingress_rule</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    label</span>      <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;k8s&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    protocol</span>   <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;tcp&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    port_range</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;6443&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    cidr</span>       <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">authorized_networks</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    action</span>     <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;allow&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#c678dd">ingress_rule</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    label</span>      <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;ssh&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    protocol</span>   <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;tcp&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    port_range</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;22&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    cidr</span>       <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">authorized_networks</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    action</span>     <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;allow&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#c678dd">egress_rule</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    label</span>      <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;all&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    protocol</span>   <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;tcp&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    port_range</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;1-65535&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    cidr</span>       <span style="color:#56b6c2">=</span> [<span style="color:#98c379">&#34;0.0.0.0/0&#34;</span>]
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    action</span>     <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;allow&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><span style="color: dark; font-weight: bold; font-style: italic; font-size: 1.5em;">node_pools.tf</span></p>
<p>Here, we define an additional node group (optional) for our Kubernetes cluster, as it is possible to add multiple node groups to the same cluster. In this resource, we can specify the number of nodes and the instance type (size) for this group. Currently, Civo offers several options, such as Standard, Performance, CPU-Optimized, and RAM Optimized, each with different characteristics. Additionally, we can choose whether the nodes in this group will have a public IP.</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hcl" data-lang="hcl"><span style="display:flex;"><span><span style="color:#c678dd">resource</span> <span style="color:#98c379">&#34;civo_kubernetes_node_pool&#34; &#34;back-end_pool&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  count</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">length</span>(<span style="color:#c678dd">var</span>.<span style="color:#c678dd">node_pools</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  cluster_id</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">civo_kubernetes_cluster</span>.<span style="color:#c678dd">civo_cluster</span>.<span style="color:#c678dd">id</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  label</span>      <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">node_pools</span>[<span style="color:#c678dd">count</span>.<span style="color:#c678dd">index</span>].<span style="color:#c678dd">label</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  node_count</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">node_pools</span>[<span style="color:#c678dd">count</span>.<span style="color:#c678dd">index</span>].<span style="color:#c678dd">node_count</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  size</span>       <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">node_pools</span>[<span style="color:#c678dd">count</span>.<span style="color:#c678dd">index</span>].<span style="color:#c678dd">size</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><span style="color: dark; font-weight: bold; font-style: italic; font-size: 1.5em;">cluster.tf</span></p>
<p>In this section, we define the Kubernetes cluster. In the reference arguments, we specify the resources defined in the previous files, excluding the Container Network Interface (CNI) and the node pool. Currently, Civo offers CNI options such as <code>cilium</code> and <code>flannel</code>. Unlike the <code>civo_kubernetes_node_pool</code> resource, the node <code>pool</code> defined here is mandatory.</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hcl" data-lang="hcl"><span style="display:flex;"><span><span style="color:#c678dd">resource</span> <span style="color:#98c379">&#34;civo_kubernetes_cluster&#34; &#34;civo_cluster&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  name</span>               <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">cluster_name</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  kubernetes_version</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">kubernetes_version</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  network_id</span>         <span style="color:#56b6c2">=</span> <span style="color:#c678dd">civo_network</span>.<span style="color:#c678dd">network_cluster_civo</span>.<span style="color:#c678dd">id</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  firewall_id</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">civo_firewall</span>.<span style="color:#c678dd">civo_firewall_cluster</span>.<span style="color:#c678dd">id</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  region</span>             <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">region</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  applications</span>       <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">applications</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  tags</span>               <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">tags</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  cni</span>                <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">cni</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#c678dd">pools</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    label</span>      <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">node_label</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    node_count</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">node_count</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    size</span>       <span style="color:#56b6c2">=</span> <span style="color:#c678dd">var</span>.<span style="color:#c678dd">node_instance_size</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><span style="color: dark; font-weight: bold; font-style: italic; font-size: 1.5em;">variables.tf</span></p>
<p>In this file, we define all the variables referenced in other files. We can assign some default values, but we must be especially careful with variables containing sensitive information, such as CIVO_TOKEN and others we wish to protect. To ensure the security of these variables and avoid exposing them, we will define and assign their values in Terraform Cloud.</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hcl" data-lang="hcl"><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;CIVO_TOKEN&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;Personal Access Token to access the CIVO API)&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;region&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;The region in which the cluster should be created.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  default</span>     <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;NYC1&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;cluster_name&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;name of the kubernetes cluster&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  default</span>     <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;core&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;firewall_name&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;name of the kubernetes cluster firewall&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  default</span>     <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;core&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;node_label&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;Label of the main node pool&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  default</span>     <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;core&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;node_count&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">number</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;Number of nodes into the cluster&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  default</span>     <span style="color:#56b6c2">=</span> <span style="color:#d19a66">3</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;node_instance_size&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;Instance type of the target nodes.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  default</span>     <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;g4s.kube.medium&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;cni&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;The cni for the k3s to install&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  default</span>     <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;cilium&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;kubernetes_version&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;supported version of the k3s cluster&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;network_name&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;name of the network to be created&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;authorized_networks&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">set</span>(<span style="color:#c678dd">string</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;Authorized networks for Kubernetes API server&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  default</span>     <span style="color:#56b6c2">=</span> [<span style="color:#98c379">&#34;0.0.0.0/0&#34;</span>]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;tags&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;Tags&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  default</span>     <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;terraform&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;node_pools&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;Addons node pools&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">list</span>(<span style="color:#c678dd">object</span>({
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    label</span>      <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    node_count</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">number</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    size</span>       <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span>  }))
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  default</span> <span style="color:#56b6c2">=</span> []
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">variable</span> <span style="color:#98c379">&#34;applications&#34;</span> {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  description</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;Comma Separated list of Application to be installed&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  type</span>        <span style="color:#56b6c2">=</span> <span style="color:#c678dd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">  default</span>     <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;-traefik2-nodeport, metrics-server&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><span style="color: dark; font-weight: bold; font-style: italic; font-size: 1.5em;">terraform.tfvars</span></p>
<p>In this file, we define values for variables that do not contain sensitive information or whose exposure does not pose a security risk.</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hcl" data-lang="hcl"><span style="display:flex;"><span><span style="color:#e06c75">region</span>             <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;NYC1&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">cluster_name</span>       <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;k3s-civo-opentofu&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">firewall_name</span>      <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;k3s-production&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">kubernetes_version</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;1.29.2-k3s1&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">node_label</span>         <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;pool-production-front-end&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">node_instance_size</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;g4s.kube.medium&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">node_count</span>         <span style="color:#56b6c2">=</span> <span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">cni</span>                <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;cilium&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">network_name</span>       <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;ks3-production&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">applications</span>       <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;metrics-server,argo-rollouts,argo-workflows,argocd&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">node_pools</span> <span style="color:#56b6c2">=</span> [
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    label</span>      <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;pool-production-back-end&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    node_count</span> <span style="color:#56b6c2">=</span> <span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">    size</span>       <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;g4s.kube.small&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><h2 id="plan-and-apply-the-configuration">Plan and apply the configuration</h2>
<p><span style="color: dark; font-weight: bold; font-style: italic; font-size: 1.5em;">Resource Creation</span></p>
<p>Once you have created the previously mentioned files or downloaded the project source code from GitLab (link at the beginning of the post), you should have a file structure similar to the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>~/kubernetes-civo-opentofu ❯ tree                       
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>├── LICENSE
</span></span><span style="display:flex;"><span>├── README.md
</span></span><span style="display:flex;"><span>├── agent.tf
</span></span><span style="display:flex;"><span>├── cluster.tf
</span></span><span style="display:flex;"><span>├── firewall.tf
</span></span><span style="display:flex;"><span>├── modules
</span></span><span style="display:flex;"><span>│   └── vpc
</span></span><span style="display:flex;"><span>│       ├── main.tf
</span></span><span style="display:flex;"><span>│       ├── outputs.tf
</span></span><span style="display:flex;"><span>│       ├── providers.tf
</span></span><span style="display:flex;"><span>│       └── variables.tf
</span></span><span style="display:flex;"><span>├── network.tf
</span></span><span style="display:flex;"><span>├── node_pools.tf
</span></span><span style="display:flex;"><span>├── outputs.tf
</span></span><span style="display:flex;"><span>├── providers.tf
</span></span><span style="display:flex;"><span>├── terraform.tfvars
</span></span><span style="display:flex;"><span>└── variables.tf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#d19a66">3</span> directories, <span style="color:#d19a66">15</span> files
</span></span></code></pre></div><p><strong>Warning:</strong> The <code>-auto-approve</code> option should be handled with great care, as it will apply changes automatically without asking for confirmation.</p>
<p>Next, run the following commands.</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>tofu init 
</span></span><span style="display:flex;"><span>tofu plan
</span></span><span style="display:flex;"><span>tofu apply -auto-approve 
</span></span></code></pre></div><p>Once the resources have been created, you should see an output similar to the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>civo_network.civo_network_cluster: Creating...
</span></span><span style="display:flex;"><span>civo_network.civo_network_cluster: Creation <span style="color:#e5c07b">complete</span> after 1s <span style="color:#56b6c2">[</span><span style="color:#e06c75">id</span><span style="color:#56b6c2">=</span>e116d8d0-b22b-4177-8f17-18ee46a83b58<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_firewall.civo_firewall_cluster: Creating...
</span></span><span style="display:flex;"><span>civo_firewall.civo_firewall_cluster: Creation <span style="color:#e5c07b">complete</span> after 4s <span style="color:#56b6c2">[</span><span style="color:#e06c75">id</span><span style="color:#56b6c2">=</span>74ace676-e035-4d62-8cdd-3a4c74db6785<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_cluster.civo_cluster: Creating...
</span></span><span style="display:flex;"><span>civo_kubernetes_cluster.civo_cluster: Still creating... <span style="color:#56b6c2">[</span>10s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_cluster.civo_cluster: Still creating... <span style="color:#56b6c2">[</span>20s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_cluster.civo_cluster: Still creating... <span style="color:#56b6c2">[</span>30s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_cluster.civo_cluster: Still creating... <span style="color:#56b6c2">[</span>40s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_cluster.civo_cluster: Still creating... <span style="color:#56b6c2">[</span>50s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_cluster.civo_cluster: Still creating... <span style="color:#56b6c2">[</span>1m0s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_cluster.civo_cluster: Creation <span style="color:#e5c07b">complete</span> after 1m6s <span style="color:#56b6c2">[</span><span style="color:#e06c75">id</span><span style="color:#56b6c2">=</span>30cae189-1734-4e8a-9989-fe754a554bbd<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Creating...
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>10s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>20s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>30s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>40s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>50s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>1m0s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>1m10s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>1m20s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>1m30s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>1m40s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>1m50s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>2m0s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>2m10s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>2m20s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>2m30s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>2m40s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>2m50s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>3m0s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>3m10s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>3m20s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>3m30s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>3m40s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>3m50s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>4m0s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>4m10s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Still creating... <span style="color:#56b6c2">[</span>4m20s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Creation <span style="color:#e5c07b">complete</span> after 4m22s <span style="color:#56b6c2">[</span><span style="color:#e06c75">id</span><span style="color:#56b6c2">=</span>pool-production-back-end<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Apply complete! Resources: <span style="color:#d19a66">4</span> added, <span style="color:#d19a66">0</span> changed, <span style="color:#d19a66">0</span> destroyed.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Outputs:
</span></span><span style="display:flex;"><span><span style="color:#e06c75">kubernetes_cluster_ready</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">true</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">kubernetes_cluster_status</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;ACTIVE&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">kubernetes_cluster_version</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;1.29.2-k3s1&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">kubernetes_cluster_endpoint</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;https://212.2.246.232:6443&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">kubernetes_cluster_id</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;30cae189-1734-4e8a-9989-fe754a554bbd&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">kubernetes_cluster_name</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;k3s-civo-opentofu&#34;</span>
</span></span></code></pre></div><p><span style="color: dark; font-weight: bold; font-style: italic; font-size: 1.5em;">Save and Switch Cluster Configuration</span></p>
<p>This command switches to the specified Kubernetes cluster. You should use the cluster name defined in the <code>kubernetes_cluster_name</code> variable; in my case, it is <code>k3s-civo-opentofu</code>. It then saves this configuration as the default and activates it for immediate use.</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>civo kubernetes config k3s-civo-opentofu --save --switch 
</span></span></code></pre></div><p><span style="color: dark; font-weight: bold; font-style: italic; font-size: 1.5em;">Validating the Connection to the Cluster</span></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>~ ❯ k get nodes
</span></span><span style="display:flex;"><span>NAME                                                     STATUS     ROLES    AGE     VERSION
</span></span><span style="display:flex;"><span>k3s-k3s-civo-opentofu-0f4a-dae818-node-pool-c109-ehwpv   Ready      &lt;none&gt;   23m     v1.29.2+k3s1
</span></span><span style="display:flex;"><span>k3s-k3s-civo-opentofu-0f4a-dae818-node-pool-c109-2nx3f   Ready      &lt;none&gt;   23m     v1.29.2+k3s1
</span></span><span style="display:flex;"><span>k3s-k3s-civo-opentofu-0f4a-dae818-node-pool-beba-gjlxk   Ready      &lt;none&gt;   21m     v1.29.2+k3s1
</span></span><span style="display:flex;"><span>k3s-k3s-civo-opentofu-0f4a-dae818-node-pool-beba-w3kvl   Ready      &lt;none&gt;   21m     v1.29.2+k3s1
</span></span><span style="display:flex;"><span>~ ❯ 
</span></span></code></pre></div><h2 id="clean-up">Clean up</h2>
<p>To delete the project, service, and data:</p>
<ol>
<li>Create a destroy plan and preview the changes to your infrastructure with the following command:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>tofu plan -destroy
</span></span></code></pre></div><ol start="2">
<li>To delete the resources and all data, run:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>tofu destroy
</span></span></code></pre></div><ol start="3">
<li>Enter <code>yes</code> to confirm. The output is similar to the following:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Destroying... <span style="color:#56b6c2">[</span><span style="color:#e06c75">id</span><span style="color:#56b6c2">=</span>pool-production-back-end<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_node_pool.back-end_pool<span style="color:#56b6c2">[</span>0<span style="color:#56b6c2">]</span>: Destruction <span style="color:#e5c07b">complete</span> after 1s
</span></span><span style="display:flex;"><span>civo_kubernetes_cluster.civo_cluster: Destroying... <span style="color:#56b6c2">[</span><span style="color:#e06c75">id</span><span style="color:#56b6c2">=</span>13b3c6d0-743a-4cc3-9372-3e50514a2577<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_cluster.civo_cluster: Still destroying... <span style="color:#56b6c2">[</span>10s elapsed<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_kubernetes_cluster.civo_cluster: Destruction <span style="color:#e5c07b">complete</span> after 11s
</span></span><span style="display:flex;"><span>civo_firewall.civo_firewall_cluster: Destroying... <span style="color:#56b6c2">[</span><span style="color:#e06c75">id</span><span style="color:#56b6c2">=</span>e92d51b9-3030-4fcd-9d6c-6347634ef88e<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_firewall.civo_firewall_cluster: Destruction <span style="color:#e5c07b">complete</span> after 3s
</span></span><span style="display:flex;"><span>civo_network.network_cluster_civo: Destroying... <span style="color:#56b6c2">[</span><span style="color:#e06c75">id</span><span style="color:#56b6c2">=</span>7ae394dd-9dc5-4166-8927-ad3bf7d7954c<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span>civo_network.network_cluster_civo: Destruction <span style="color:#e5c07b">complete</span> after 9s
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Apply complete! Resources: <span style="color:#d19a66">0</span> added, <span style="color:#d19a66">0</span> changed, <span style="color:#d19a66">4</span> destroyed.
</span></span></code></pre></div>
          </article>
        </div>
      </div>
      <div class="col-sm-12 col-md-12 col-lg-3">
        <div id="stickySideBar" class="sticky-sidebar">
          
          <aside class="toc">
              <h5>
                Table Of Contents
              </h5>
              <div class="toc-content">
                <nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#configure-backend">Configure Backend</a></li>
    <li><a href="#defining-a-kubernetes-resource">Defining a Kubernetes resource</a></li>
    <li><a href="#plan-and-apply-the-configuration">Plan and apply the configuration</a></li>
    <li><a href="#clean-up">Clean up</a></li>
  </ul>
</nav>
              </div>
          </aside>
          

          
          <aside class="tags">
            <h5>Tags</h5>
            <ul class="tags-ul list-unstyled list-inline">
              
              <li class="list-inline-item"><a href="https://xavierllauca.com/tags/cncf"
                target="_blank"
              >cncf</a></li>
              
              <li class="list-inline-item"><a href="https://xavierllauca.com/tags/opentofu"
                target="_blank"
              >opentofu</a></li>
              
              <li class="list-inline-item"><a href="https://xavierllauca.com/tags/kubernetes"
                target="_blank"
              >kubernetes</a></li>
              
            </ul>
          </aside>
          

          
          <aside class="social">
            <h5>Social</h5>
            <div class="social-content">
              <ul class="list-inline">
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fxavierllauca.com%2fblogs%2fk8s-cluster-with-opentofu%2f">
                    <i class="fab fa-linkedin"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://twitter.com/share?text=Deploying%20a%20Civo%20Kubernetes%20Cluster%20with%20Opentofu&url=https%3a%2f%2fxavierllauca.com%2fblogs%2fk8s-cluster-with-opentofu%2f">
                    <i class="fab fa-twitter"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://api.whatsapp.com/send?text=Deploying%20a%20Civo%20Kubernetes%20Cluster%20with%20Opentofu: https%3a%2f%2fxavierllauca.com%2fblogs%2fk8s-cluster-with-opentofu%2f">
                    <i class="fab fa-whatsapp"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href='mailto:?subject=Deploying%20a%20Civo%20Kubernetes%20Cluster%20with%20Opentofu&amp;body=Check%20out%20this%20site https%3a%2f%2fxavierllauca.com%2fblogs%2fk8s-cluster-with-opentofu%2f'>
                    <i class="fa fa-envelope"></i>
                  </a>
                </li>
              </ul>
            </div>
          </aside>
          
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-9 p-4">
        <script src="https://giscus.app/client.js"
        data-repo="xllauca/xllauca.github.io"
        data-repo-id="R_kgDOLaghNg"
        data-category="Ideas"
        data-category-id="DIC_kwDOLaghNs4Ch10-"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="noborder_dark"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
      </div>
    </div>
  </div>
  <button class="p-2 px-3" onclick="topFunction()" id="topScroll">
    <i class="fas fa-angle-up"></i>
  </button>
</section>


<div class="progress">
  <div id="scroll-progress-bar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
</div>
<Script src="/js/scrollProgressBar.js"></script>


<script>
  var topScroll = document.getElementById("topScroll");
  window.onscroll = function() {scrollFunction()};

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      topScroll.style.display = "block";
    } else {
      topScroll.style.display = "none";
    }
  }

  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }

  
  let stickySideBarElem = document.getElementById("stickySideBar");
  let stickyNavBar =  true ;
  if(stickyNavBar) {
    let headerElem = document.getElementById("profileHeader");
    let headerHeight = headerElem.offsetHeight + 15;
    stickySideBarElem.style.top = headerHeight + "px";
  } else {
    stickySideBarElem.style.top = "50px";
  }
</script>


<script src="/js/readingTime.js"></script>



  </div><footer>
    
 

<div class="text-center pt-2">
    
    <span class="px-1">
        <a href="https://github.com/xllauca" aria-label="github">
            <svg xmlns="http://www.w3.org/2000/svg" width="2.7em" height="2.7em" viewBox="0 0 1792 1792">
                <path id="footer-socialNetworks-github-svg-path"
                    d="M522 1352q-8 9-20-3-13-11-4-19 8-9 20 3 12 11 4 19zm-42-61q9 12 0 19-8 6-17-7t0-18q9-7 17 6zm-61-60q-5 7-13 2-10-5-7-12 3-5 13-2 10 5 7 12zm31 34q-6 7-16-3-9-11-2-16 6-6 16 3 9 11 2 16zm129 112q-4 12-19 6-17-4-13-15t19-7q16 5 13 16zm63 5q0 11-16 11-17 2-17-11 0-11 16-11 17-2 17 11zm58-10q2 10-14 14t-18-8 14-15q16-2 18 9zm964-956v960q0 119-84.5 203.5t-203.5 84.5h-224q-16 0-24.5-1t-19.5-5-16-14.5-5-27.5v-239q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105 20.5-150.5q0-121-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27t-83.5-38.5-86-13.5q-44 113-7 204-79 85-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-40 36-49 103-21 10-45 15t-57 5-65.5-21.5-55.5-62.5q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 103t.5 68q0 22-11 33.5t-22 13-33 1.5h-224q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z" />

                <metadata>
                    <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                        xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" xmlns:dc="http://purl.org/dc/elements/1.1/">
                        <rdf:Description about="https://iconscout.com/legal#licenses"
                            dc:title="Github, Online, Project, Hosting, Square"
                            dc:description="Github, Online, Project, Hosting, Square" dc:publisher="Iconscout"
                            dc:date="2016-12-14" dc:format="image/svg+xml" dc:language="en">
                            <dc:creator>
                                <rdf:Bag>
                                    <rdf:li>Font Awesome</rdf:li>
                                </rdf:Bag>
                            </dc:creator>
                        </rdf:Description>
                    </rdf:RDF>
                </metadata>
            </svg>
        </a>
    </span>
    

    
    <span class="px-1">
        <a href="https://linkedin.com/in/xllauca" aria-label="linkedin">
            <svg xmlns="http://www.w3.org/2000/svg" width='2.4em' height='2.4em' fill="#fff" aria-label="LinkedIn"
                viewBox="0 0 512 512">
                <rect width="512" height="512" fill="#0077b5" rx="15%" />
                <circle cx="142" cy="138" r="37" />
                <path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198" />
                <path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32" />
            </svg>
        </a>
    </span>
    

    
    <a href="https://twitter.com/xllauca" aria-label="twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48px" height="48px">
            <path fill="#03a9f4"
                d="M42,37c0,2.762-2.239,5-5,5H11c-2.762,0-5-2.238-5-5V11c0-2.762,2.238-5,5-5h26c2.761,0,5,2.238,5,5 V37z" />
            <path fill="#fff"
                d="M36,17.12c-0.882,0.391-1.999,0.758-3,0.88c1.018-0.604,2.633-1.862,3-3 c-0.951,0.559-2.671,1.156-3.793,1.372C31.311,15.422,30.033,15,28.617,15C25.897,15,24,17.305,24,20v2c-4,0-7.9-3.047-10.327-6 c-0.427,0.721-0.667,1.565-0.667,2.457c0,1.819,1.671,3.665,2.994,4.543c-0.807-0.025-2.335-0.641-3-1c0,0.016,0,0.036,0,0.057 c0,2.367,1.661,3.974,3.912,4.422C16.501,26.592,16,27,14.072,27c0.626,1.935,3.773,2.958,5.928,3c-1.686,1.307-4.692,2-7,2 c-0.399,0-0.615,0.022-1-0.023C14.178,33.357,17.22,34,20,34c9.057,0,14-6.918,14-13.37c0-0.212-0.007-0.922-0.018-1.13 C34.95,18.818,35.342,18.104,36,17.12" />
        </svg>
    </a>
    

    

    
</div><div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-4 text-center">
            <div class="pb-2">
                <a href="https://xavierllauca.com/" title="Xavier Llauca">

                    <div style="height: 40px; width: 40px;"></div>

                </a>
            </div>
            Xavier Llauca &copy; 2024  All Rights Reserved
            <div class="text-secondary">
                Made with
                <span class="text-danger">
                    &#10084;
                </span>
                in Ecuador 🇪🇨
                </a>
            </div>
        </div>
    </div>
</div></footer><script src="/bootstrap-5/js/bootstrap.bundle.min.js"></script>
<script>
    if (document.body.className.includes("light")) {
        document.body.classList.add('dark');
        localStorage.setItem("pref-theme", 'dark');
    }
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })

</script>


    <script src="/js/search.js"></script>





<!-- MathJax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js" integrity="sha384-M5jmNxKC9EVnuqeMwRHvFuYUE8Hhp0TgBruj/GZRkYtiMrCRgH7yvv5KY+Owi7TW" crossorigin="anonymous"></script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['\\(','\\)']],
        displayMath: [['$$','$$'], ['\[','\]']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        TeX: { equationNumbers: { autoNumber: "AMS" },
             extensions: ["AMSmath.js", "AMSsymbols.js"] }
      }
    });
</script>








  <section id="search-content" class="py-2">
    <div class="container" id="search-results"></div>
  </section>
</body>

</html>
